# ChatCLI Helm Chart - Default Values

replicaCount: 1

image:
  repository: chatcli
  tag: latest
  pullPolicy: IfNotPresent

imagePullSecrets: []
nameOverride: ""
fullnameOverride: ""

# gRPC server configuration
server:
  port: 50051
  # Authentication token for gRPC server (leave empty to disable auth)
  token: ""

# TLS configuration
tls:
  enabled: false
  # certFile and keyFile are paths inside the container
  certFile: ""
  keyFile: ""
  # Use existing secret for TLS certificates
  existingSecret: ""

# LLM Provider configuration
llm:
  # Default provider: OPENAI, CLAUDEAI, GOOGLEAI, XAI, STACKSPOT, OLLAMA
  provider: ""
  model: ""

# Provider API keys (stored in a Secret)
# Set these values or use existingSecret
secrets:
  # Use an existing secret instead of creating one
  existingSecret: ""
  openaiApiKey: ""
  anthropicApiKey: ""
  googleaiApiKey: ""
  xaiApiKey: ""
  # StackSpot
  stackspotClientId: ""
  stackspotClientKey: ""
  stackspotRealm: ""
  stackspotAgentId: ""

# Ollama configuration (if using Ollama provider)
ollama:
  enabled: false
  baseUrl: "http://ollama:11434"
  model: ""

# Kubernetes Watcher mode
watcher:
  enabled: false

  # Single-target mode (legacy) — use "deployment" + "namespace"
  deployment: ""
  namespace: ""

  # Multi-target mode — use "targets" list (takes precedence over deployment/namespace)
  # targets:
  #   - deployment: api-gateway
  #     namespace: production
  #     metricsPort: 9090
  #     metricsPath: "/metrics"
  #     metricsFilter: ["http_requests_*", "http_request_duration_*"]
  #   - deployment: auth-service
  #     namespace: production
  #     metricsPort: 9090
  #   - deployment: worker
  #     namespace: batch
  targets: []

  interval: "30s"
  window: "2h"
  maxLogLines: 100
  # Budget maximo de caracteres para contexto LLM (multi-target)
  maxContextChars: 8000

serviceAccount:
  create: true
  name: ""
  annotations: {}

# RBAC for K8s watcher mode
rbac:
  create: true
  # Set to true to use ClusterRole/ClusterRoleBinding instead of namespace-scoped Role/RoleBinding.
  # Default false (least-privilege: namespace-scoped).
  clusterWide: false
  # Additional rules beyond the defaults
  additionalRules: []

service:
  type: ClusterIP
  port: 50051

ingress:
  enabled: false
  className: ""
  annotations: {}
  hosts:
    - host: chatcli.local
      paths:
        - path: /
          pathType: ImplementationSpecific
  tls: []

resources:
  requests:
    memory: "128Mi"
    cpu: "100m"
  limits:
    memory: "512Mi"
    cpu: "500m"

# Pod-level security context
podSecurityContext:
  runAsNonRoot: true
  runAsUser: 1000
  runAsGroup: 1000
  fsGroup: 1000
  seccompProfile:
    type: RuntimeDefault

# Container-level security context
securityContext:
  allowPrivilegeEscalation: false
  readOnlyRootFilesystem: true
  capabilities:
    drop:
      - ALL

nodeSelector: {}
tolerations: []
affinity: {}

# Extra environment variables
extraEnv: []
# - name: LOG_LEVEL
#   value: "debug"

# Persistence for sessions
persistence:
  enabled: true
  storageClass: ""
  accessModes:
    - ReadWriteOnce
  size: 1Gi
